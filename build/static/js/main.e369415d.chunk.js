(this["webpackJsonpauth-reload"]=this["webpackJsonpauth-reload"]||[]).push([[3],{122:function(e,t,n){},123:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(45),a=n.n(r),s=n(10),o=n(22),i=(n(122),n(123),n(35)),u=n(7),l=n(36),j=n(21),b=n(78),d=n(4),h=function(e){e.showPiece;return Object(d.jsx)(b.a,{children:"...isLoading"})},f=function(e){var t=e.children,n=Object(u.f)(),r=Object(l.a)((function(e){return e.logout})),a=Object(l.a)((function(e){return e.accessToken})),s=Object(c.useState)(!0),o=Object(i.a)(s,2),b=o[0],f=o[1],p=Object(c.useCallback)((function(){try{f(!1)}catch(e){f(!1),r()}}),[r]);return Object(c.useEffect)((function(){Object(j.c)({onLogout:function(){r(),n.push("/")}}),a?p():f(!1)}),[a,n,r,p]),b?Object(d.jsx)(h,{}):t},p=n(49),x=n(64),m=n(80),O=n(66),g=n(156),v=n(85),w=["children"];function y(e){var t=e.children,n=Object(v.a)(e,w);return Object(d.jsx)(b.a,Object(p.a)(Object(p.a)({maxW:"1440px",mx:"auto",px:2},n),{},{children:t}))}var k=Object(g.a)(m.a);function S(){return Object(d.jsx)(y,{position:"relative",mb:{base:36,md:0},children:Object(d.jsxs)(b.e,{direction:{base:"column",md:"row"},pb:16,children:[Object(d.jsx)(b.c,{p:{base:4,md:8},pl:0,flex:1,align:"center",justify:"center",mt:16,children:Object(d.jsxs)(b.e,{spacing:4,justify:{base:"center",md:"start"},w:{md:"full"},children:[Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.d,{as:"h1",fontSize:{base:"4xl",md:"5xl",lg:"6xl"},textColor:"#2D81A5",m:0,p:0,children:"From for test AUTH"}),Object(d.jsx)(b.f,{fontSize:{base:"lg",lg:"xl"},color:"teal.500",children:"Just fill the form and do request"})]}),Object(d.jsx)(k,{colorScheme:"teal",w:56,py:8,as:"a",size:"lg",fontSize:"3xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:Object(d.jsx)(s.b,{to:"/signup",children:"Make Now"})})]})}),Object(d.jsx)(b.c,{flex:1,justify:"center",align:"center",position:"relative",overflow:"hidden",children:Object(d.jsx)(O.a,{alt:"Login image",objectFit:"cover",src:"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1352&q=80"})})]})})}var T=Object(g.a)(m.a);function z(){return Object(d.jsx)(y,{children:Object(d.jsxs)(b.c,{mx:"auto",justify:"space-between",py:2,align:"center",children:[Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)(b.c,{align:"center",children:Object(d.jsx)(b.a,{h:20,children:Object(d.jsx)(O.a,{src:"https://svgshare.com/i/Gts.svg",h:{base:12,md:20},mt:{base:4,md:0}})})})}),Object(d.jsxs)(b.e,{direction:"row",spacing:6,children:[Object(d.jsx)(T,{as:s.b,to:"/signup",colorScheme:"teal",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},children:"Sign Up"}),Object(d.jsx)(T,{as:s.b,to:"/login",colorScheme:"gray",color:"teal.400",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},children:"Login"})]})]})})}var L=n(17),D=n(33),H=n(67),P=n(68),A=Object(g.a)(m.a);function C(){var e=Object(l.a)((function(e){return e.logout})),t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),u=Object(i.a)(o,2),j=u[0],h=u[1];function f(){return(f=Object(D.a)(Object(L.a)().mark((function t(){var n,c,r;return Object(L.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),h(!1),t.prev=2,t.next=5,e();case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),r=(null===(n=t.t0.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||t.t0.message,h(r);case 11:return t.prev=11,a(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,7,11,14]])})))).apply(this,arguments)}return Object(d.jsx)(y,{children:Object(d.jsxs)(b.c,{mx:"auto",justify:"space-between",py:2,align:"center",children:[Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)(b.c,{align:"center",children:Object(d.jsx)(b.a,{h:20,children:Object(d.jsx)(O.a,{src:"https://svgshare.com/i/Gts.svg",h:{base:12,md:20},mt:{base:4,md:0}})})})}),Object(d.jsx)(b.e,{direction:"row",spacing:6,children:Object(d.jsx)(A,{as:s.b,to:"/",colorScheme:"gray",color:"teal.400",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},isLoading:r,onClick:function(){return f.apply(this,arguments)},children:"Logout"})}),j&&Object(d.jsxs)(H.a,{status:"error",mt:4,color:"teal.700",fontWeight:"semibold",children:[Object(d.jsx)(H.c,{}),Object(d.jsx)(P.a,{position:"absolute",right:"8px",top:"8px",onClick:function(){return h(!1)}}),j]})]})})}function G(){return Object(d.jsx)(b.b,{as:b.e,py:4,bg:"teal.500",maxW:"1440px",rounded:{md:"2xl"},children:Object(d.jsxs)(b.e,{direction:{base:"column",sm:"row"},justify:"center",align:"center",spacing:8,color:"black",children:[Object(d.jsx)(b.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(s.b,{to:"/",children:"Home"})}),Object(d.jsx)(b.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(s.b,{to:"/contact",children:"Contact"})}),Object(d.jsx)(b.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(s.b,{to:"/about",children:"About"})})]})})}var I=function(e){var t=Object(l.a)((function(e){return e.accessToken})),n=Object(c.useState)(null),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){s(t)}),[t]),Object(d.jsxs)(b.a,{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",children:[Object(d.jsxs)(b.a,{flexBasis:"auto",flexGrow:"1",flexShrink:"1",children:[a?Object(d.jsx)(C,{}):Object(d.jsx)(z,{}),Object(d.jsx)("main",{children:e.children})]}),Object(d.jsx)(G,{})]})};var M=function(e){return e.children},U=[{exact:!0,layout:I,path:"/",guard:M,component:function(){return Object(d.jsx)(x.a,{children:Object(d.jsx)(S,{})})}},{exact:!0,layout:I,path:"/contact",guard:M,component:Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7)]).then(n.bind(null,178))}))},{exact:!0,layout:I,path:"/about",guard:M,component:Object(c.lazy)((function(){return n.e(10).then(n.bind(null,181))}))},{exact:!0,path:"/login",guard:M,component:Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,182))}))},{exact:!0,path:"/signup",guard:M,component:Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(6),n.e(9)]).then(n.bind(null,180))}))},{exact:!1,path:"/success",layout:I,guard:M,component:Object(c.lazy)((function(){return n.e(11).then(n.bind(null,177))}))}],B=function e(t){return Object(d.jsx)(u.c,{children:t.map((function(t,n){var r=t.guard||c.Fragment,a=t.layout||c.Fragment,s=t.component;return Object(d.jsx)(u.a,{path:t.path,exact:t.exact,render:function(n){return Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)(h,{showPiece:t.loader}),children:Object(d.jsx)(r,{children:Object(d.jsx)(a,{children:t.routes?e(t.routes):Object(d.jsx)(s,Object(p.a)({},n))})})})}},n)}))})};var E=function(){return B(U)};var F=function(){return Object(d.jsx)(f,{children:Object(d.jsx)(E,{})})},R=Object(o.b)({fonts:{heading:"'Roboto', sans-serif",body:"'Montserrat', sans-serif"}});a.a.render(Object(d.jsx)(o.a,{theme:R,children:Object(d.jsx)(s.a,{children:Object(d.jsx)(F,{})})}),document.getElementById("root"))},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var c=n(82),r=n.n(c).a.create();r.defaults.baseURL="https://authform-3ba6678a7fd8.herokuapp.com";var a=function(e){var t=e.onLogout;r.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&t&&t(),Promise.reject(e)}))},s=function(){delete r.defaults.headers.common.Authorization};t.a=r},36:function(e,t,n){"use strict";var c=n(17),r=n(33),a=n(83),s=n.n(a),o=n(84),i=(n(81),n(7),n(21)),u=function(e){e&&(i.a.defaults.headers.common.token=e)},l=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,n){var r,a,s,o,l,j;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("base IN",i.a.defaults.baseURL),e.next=4,i.a.post("/api/auth/login",{email:t,password:n});case 4:return r=e.sent,console.log("response LOGIN",r.data),a=r.data,s=a.token,o=a.userData,l=a.userId,u(s),j={userId:l,username:o.role,score:Math.round(2e3)||300},"admin"===o.role?(j.isAdmin=!0,j.status="admin"):"user"===o.role?j.status="user":j.status="guest",e.abrupt("return",{user:j,accessToken:s});case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n,r,a,s,o,l,j,b,d,h,f;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.surname,a=t.email,s=t.password,o=t.role,l=t.avatar,j=t.message,e.prev=1,console.log("base UP",i.a.defaults.baseURL),e.next=5,i.a.post("/api/auth/signup",{username:n,surname:r,email:a,password:s,message:j,role:o,avatar:l});case 5:return b=e.sent,d=b.data,h=d.userData,f=d.token,u(f),"admin"===h.role?h.isAdmin=!0:"user"===h.role?h.status="user":h.status="guest",e.abrupt("return",{user:h,accessToken:f});case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),b=s()(Object(o.persist)((function(e){return{accessToken:null,user:null,redirect:null,signup:function(){var t=Object(r.a)(Object(c.a)().mark((function t(n){var r,a,s,o,i,u,l,b,d,h;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.username,a=n.surname,s=n.email,o=n.password,i=n.role,u=n.message,l=n.avatar,t.next=3,j({username:r,surname:a,email:s,password:o,message:u,role:i,avatar:l});case 3:b=t.sent,d=b.accessToken,h=b.user,"/",e({user:h,accessToken:d,redirect:"/"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=Object(r.a)(Object(c.a)().mark((function t(n,r){var a,s,o;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(n,r);case 2:a=t.sent,s=a.accessToken,o=a.user,console.log("user",o),console.log("login accessToken",s),e({user:o,accessToken:s});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),logout:function(){e({accessToken:null,user:null,redirect:null}),localStorage.removeItem("auth"),sessionStorage.clear(),Object(i.b)()}}}),{name:"auth",partialize:function(e){return{user:e.user,accessToken:e.accessToken}}}));t.a=b},64:function(e,t,n){"use strict";var c=n(0);t.a=function(e){var t=e.children,n=e.title;return Object(c.useEffect)((function(){document.title=n||"Page with Content!",window.scrollTo(0,0)}),[n]),t}}},[[153,4,5]]]);
//# sourceMappingURL=main.e369415d.chunk.js.map