(this["webpackJsonpauth-reload"]=this["webpackJsonpauth-reload"]||[]).push([[3],{115:function(e,t,s){},116:function(e,t,s){},146:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s(41),n=s.n(a),o=s(10),r=s(21),l=(s(115),s(116),s(7)),i=s(32),u=s(20),j=s(73),d=s(4);var b=e=>{let{showPiece:t}=e;return Object(d.jsx)(j.a,{children:"...isLoading"})};var h=e=>{let{children:t}=e;const s=Object(l.f)(),a=Object(i.a)((e=>e.logout)),n=Object(i.a)((e=>e.accessToken)),[o,r]=Object(c.useState)(!0),j=Object(c.useCallback)((()=>{try{r(!1)}catch(e){r(!1),a()}}),[a]);return Object(c.useEffect)((()=>{Object(u.c)({onLogout:()=>{a(),s.push("/")}}),n?j():r(!1)}),[n,s,a,j]),o?Object(d.jsx)(b,{}):t},x=s(59),m=s(75),p=s(61),O=s(149);function f(e){let{children:t,...s}=e;return Object(d.jsx)(j.a,{maxW:"1440px",mx:"auto",px:2,...s,children:t})}const g=Object(O.a)(m.a);function w(){return Object(d.jsx)(f,{position:"relative",mb:{base:36,md:0},children:Object(d.jsxs)(j.e,{direction:{base:"column",md:"row"},pb:16,children:[Object(d.jsx)(j.c,{p:{base:4,md:8},pl:0,flex:1,align:"center",justify:"center",mt:16,children:Object(d.jsxs)(j.e,{spacing:4,justify:{base:"center",md:"start"},w:{md:"full"},children:[Object(d.jsxs)(j.a,{children:[Object(d.jsx)(j.d,{as:"h1",fontSize:{base:"4xl",md:"5xl",lg:"6xl"},textColor:"#2D81A5",m:0,p:0,children:"From for test AUTH"}),Object(d.jsx)(j.f,{fontSize:{base:"lg",lg:"xl"},color:"teal.500",children:"Just fill the form and do request"})]}),Object(d.jsx)(g,{colorScheme:"teal",w:56,py:8,as:"a",size:"lg",fontSize:"3xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:Object(d.jsx)(o.b,{to:"/signup",children:"Make Now"})})]})}),Object(d.jsx)(j.c,{flex:1,justify:"center",align:"center",position:"relative",overflow:"hidden",children:Object(d.jsx)(p.a,{alt:"Login image",objectFit:"cover",src:"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1352&q=80"})})]})})}const y=Object(O.a)(m.a);function v(){return Object(d.jsx)(f,{children:Object(d.jsxs)(j.c,{mx:"auto",justify:"space-between",py:2,align:"center",children:[Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)(j.c,{align:"center",children:Object(d.jsx)(j.a,{h:20,children:Object(d.jsx)(p.a,{src:"https://svgshare.com/i/Gts.svg",h:{base:12,md:20},mt:{base:4,md:0}})})})}),Object(d.jsxs)(j.e,{direction:"row",spacing:6,children:[Object(d.jsx)(y,{as:o.b,to:"/signup",colorScheme:"teal",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},children:"Sign Up"}),Object(d.jsx)(y,{as:o.b,to:"/login",colorScheme:"gray",color:"teal.400",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},children:"Login"})]})]})})}var k=s(62),S=s(63);const T=Object(O.a)(m.a);function z(){const e=Object(i.a)((e=>e.logout)),[t,s]=Object(c.useState)(!1),[a,n]=Object(c.useState)(!1);return Object(d.jsx)(f,{children:Object(d.jsxs)(j.c,{mx:"auto",justify:"space-between",py:2,align:"center",children:[Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)(j.c,{align:"center",children:Object(d.jsx)(j.a,{h:20,children:Object(d.jsx)(p.a,{src:"https://svgshare.com/i/Gts.svg",h:{base:12,md:20},mt:{base:4,md:0}})})})}),Object(d.jsx)(j.e,{direction:"row",spacing:6,children:Object(d.jsx)(T,{as:o.b,to:"/",colorScheme:"gray",color:"teal.400",px:{base:4,md:8},py:{base:2,md:6},whileHover:{scale:1.03},whileTap:{scale:.97},fontSize:{base:"md",md:"xl"},isLoading:t,onClick:async function(){s(!0),n(!1);try{await e()}catch(a){var t,c;const e=(null===(t=a.response)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.message)||a.message;n(e)}finally{s(!1)}},children:"Logout"})}),a&&Object(d.jsxs)(k.a,{status:"error",mt:4,color:"teal.700",fontWeight:"semibold",children:[Object(d.jsx)(k.c,{}),Object(d.jsx)(S.a,{position:"absolute",right:"8px",top:"8px",onClick:()=>n(!1)}),a]})]})})}function L(){return Object(d.jsx)(j.b,{as:j.e,py:4,bg:"teal.500",maxW:"1440px",rounded:{md:"2xl"},children:Object(d.jsxs)(j.e,{direction:{base:"column",sm:"row"},justify:"center",align:"center",spacing:8,color:"black",children:[Object(d.jsx)(j.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(o.b,{to:"/",children:"Home"})}),Object(d.jsx)(j.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(o.b,{to:"/contact",children:"Contact"})}),Object(d.jsx)(j.f,{_hover:{textDecoration:"underline"},children:Object(d.jsx)(o.b,{to:"/about",children:"About"})})]})})}var D=function(e){const t=Object(i.a)((e=>e.accessToken)),[s,a]=Object(c.useState)(null);return Object(c.useEffect)((()=>{a(t)}),[t]),Object(d.jsxs)(j.a,{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",children:[Object(d.jsxs)(j.a,{flexBasis:"auto",flexGrow:"1",flexShrink:"1",children:[s?Object(d.jsx)(z,{}):Object(d.jsx)(v,{}),Object(d.jsx)("main",{children:e.children})]}),Object(d.jsx)(L,{})]})};var H=function(e){let{children:t}=e;return t};var P=[{exact:!0,layout:D,path:"/",guard:H,component:function(){return Object(d.jsx)(x.a,{children:Object(d.jsx)(w,{})})}},{exact:!0,layout:D,path:"/contact",guard:H,component:Object(c.lazy)((()=>Promise.all([s.e(0),s.e(2),s.e(7)]).then(s.bind(null,168))))},{exact:!0,layout:D,path:"/about",guard:H,component:Object(c.lazy)((()=>s.e(10).then(s.bind(null,171))))},{exact:!0,path:"/login",guard:H,component:Object(c.lazy)((()=>Promise.all([s.e(0),s.e(1),s.e(8)]).then(s.bind(null,172))))},{exact:!0,path:"/signup",guard:H,component:Object(c.lazy)((()=>Promise.all([s.e(0),s.e(2),s.e(1),s.e(6),s.e(9)]).then(s.bind(null,170))))},{exact:!1,path:"/success",layout:D,guard:H,component:Object(c.lazy)((()=>s.e(11).then(s.bind(null,167))))}];const A=e=>Object(d.jsx)(l.c,{children:e.map(((e,t)=>{const s=e.guard||c.Fragment,a=e.layout||c.Fragment,n=e.component;return Object(d.jsx)(l.a,{path:e.path,exact:e.exact,render:t=>Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)(b,{showPiece:e.loader}),children:Object(d.jsx)(s,{children:Object(d.jsx)(a,{children:e.routes?A(e.routes):Object(d.jsx)(n,{...t})})})})},t)}))});var C=function(){return A(P)};var G=function(){return Object(d.jsx)(h,{children:Object(d.jsx)(C,{})})};const I=Object(r.b)({fonts:{heading:"'Roboto', sans-serif",body:"'Montserrat', sans-serif"}});n.a.render(Object(d.jsx)(r.a,{theme:I,children:Object(d.jsx)(o.a,{children:Object(d.jsx)(G,{})})}),document.getElementById("root"))},20:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return o}));var c=s(77);const a=s.n(c).a.create();a.defaults.baseURL="https://authform-3ba6678a7fd8.herokuapp.com";const n=e=>{let{onLogout:t}=e;a.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&t&&t(),Promise.reject(e))))},o=()=>{delete a.defaults.headers.common.Authorization};t.a=a},32:function(e,t,s){"use strict";var c=s(78),a=s.n(c),n=s(79),o=(s(76),s(7),s(20));const r=e=>{e&&(o.a.defaults.headers.common.token=e)};const l=a()(Object(n.persist)((e=>({accessToken:null,user:null,redirect:null,signup:async t=>{let{username:s,surname:c,email:a,password:n,role:l,message:i,avatar:u}=t;const{accessToken:j,user:d}=await(async e=>{let{username:t,surname:s,email:c,password:a,role:n,avatar:l,message:i}=e;try{console.log("base UP",o.a.defaults.baseURL);const e=await o.a.post("/api/auth/signup",{username:t,surname:s,email:c,password:a,message:i,role:n,avatar:l}),{userData:u,token:j}=e.data;return r(j),"admin"===u.role?u.isAdmin=!0:"user"===u.role?u.status="user":u.status="guest",{user:u,accessToken:j}}catch(u){throw u}})({username:s,surname:c,email:a,password:n,message:i,role:l,avatar:u});e({user:d,accessToken:j,redirect:"/"})},login:async(t,s)=>{const{accessToken:c,user:a}=await(async(e,t)=>{try{console.log("base IN",o.a.defaults.baseURL);const s=await o.a.post("/api/auth/login",{email:e,password:t});console.log("response LOGIN",s.data);const{token:c,userData:a,userId:n}=s.data;r(c);const l={userId:n,username:a.role,score:Math.round(2e3)||300};return"admin"===a.role?(l.isAdmin=!0,l.status="admin"):"user"===a.role?l.status="user":l.status="guest",{user:l,accessToken:c}}catch(s){throw s}})(t,s);console.log("user",a),console.log("login accessToken",c),e({user:a,accessToken:c})},logout:()=>{e({accessToken:null,user:null,redirect:null}),localStorage.removeItem("auth"),sessionStorage.clear(),Object(o.b)()}})),{name:"auth",partialize:e=>({user:e.user,accessToken:e.accessToken})}));t.a=l},59:function(e,t,s){"use strict";var c=s(0);t.a=function(e){let{children:t,title:s}=e;return Object(c.useEffect)((()=>{document.title=s||"Page with Content!",window.scrollTo(0,0)}),[s]),t}}},[[146,4,5]]]);
//# sourceMappingURL=main.6fcd6524.chunk.js.map