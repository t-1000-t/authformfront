"use strict";(self.webpackChunkauthform=self.webpackChunkauthform||[]).push([[704],{3704:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var s=n(5043),r=n(2107),o=n(6221),i=n(9838),l=n(9301),a=n(502),c=n(8846),d=n(3225),u=n(9077),x=n(9904),h=n(7781),p=n(6446),f=n(3585),g=n(6800),m=n(1648),v=n(9186),j=n(7208),b=n(7854),y=n(9379),w=n(5371),k=n(2703),S=n(7139),D=n(3669),A=n(6720),C=n(1024),E=n(4259),N=n(1401),I=n(202);const T=[{key:"done",label:"Done",colorScheme:"red"},{key:"inProgress",label:"In Progress",colorScheme:"orange"},{key:"new",label:"New",colorScheme:"green"}];var M=n(579);const _=e=>{let{x:t,y:n,closeMenu:o,onSelect:i}=e;const a=(0,s.useRef)(null);return(0,N.j)({ref:a,handler:o}),(0,s.useEffect)(()=>{const e=e=>"Escape"===e.key&&o();return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]),(0,M.jsx)(r.a,{ref:a,position:"fixed",top:n,left:t,zIndex:"popover",bg:"white",borderWidth:"1px",rounded:"md",shadow:"lg",p:2,minW:"180px",children:(0,M.jsxs)(I.T,{align:"stretch",spacing:1,children:[T.map(e=>(0,M.jsx)(l.$,{variant:"ghost",justifyContent:"flex-start",onClick:()=>null===i||void 0===i?void 0:i(e.key),children:e.label},e.key)),(0,M.jsx)(l.$,{variant:"ghost",justifyContent:"flex-start",onClick:o,children:"Cancel"})]})})},z=e=>{let{item:t,onDelete:n}=e;const{setActivatorNodeRef:o,attributes:i,listeners:a,setNodeRef:c,transform:d,transition:u,isDragging:x}=(0,m.gl)({id:t._id}),[p,f]=(0,s.useState)({open:!1,x:0,y:0}),[g,v]=(0,s.useState)(null),j=e=>{e.preventDefault(),f({open:!0,x:e.clientX,y:e.clientY})},b=()=>f(e=>(0,y.A)((0,y.A)({},e),{},{open:!1})),N={transform:C.Ks.Transform.toString(d),transition:u,boxShadow:x?"0 8px 24px rgba(0,0,0,0.15)":void 0,background:x?"rgba(0,0,0,0.02)":void 0,borderRadius:"12px"};return(0,M.jsx)(h.ck,{ref:c,style:N,children:(0,M.jsxs)(w.s,{align:"center",gap:1,p:1,children:[(0,M.jsx)(k.K,(0,y.A)((0,y.A)((0,y.A)({ref:o,"aria-label":"Drag to reorder",variant:"solid",size:"sm"},i),a),{},{icon:(0,M.jsx)(E.A,{size:18}),cursor:"grab",_active:{cursor:"grabbing"}})),(0,M.jsxs)(r.a,{flex:"1",wordBreak:"break-word",onClick:j,children:[g&&(0,M.jsx)(S.E,{mr:2,colorScheme:g.colorScheme,children:g.label}),(0,M.jsx)(h.kp,{as:A.mU9,color:"green.500"}),t.text]}),(0,M.jsx)(D.h,{}),(0,M.jsx)(l.$,{size:"sm",height:"28px",width:"100px",border:"1px",borderColor:"red.500",leftIcon:(0,M.jsx)(A.QcV,{size:14}),onClick:n,children:"Delete"}),p.open&&(0,M.jsx)(_,{x:p.x,y:p.y,openMenu:j,closeMenu:b,onSelect:e=>{v(T.find(t=>t.key===e)),b()}})]})})},L=(0,p.P)(l.$),P=()=>{var e;const{getDataNotes:t,noteText:n,deleteNote:i,accessToken:l,user:p,listUp:y,setNoteList:w,hasChangeGlobalLoading:k}=(0,v.A)(),S=(0,a.d)({position:"top-right"}),D=null===p||void 0===p||null===(e=p.userData)||void 0===e?void 0:e.email,[A,C]=(0,s.useState)(""),[E,N]=(0,s.useState)([]);(0,s.useEffect)(()=>{N([...null!==y&&void 0!==y?y:[]].toReversed())},[y]);const I=(0,s.useCallback)(async()=>{try{const e=await t(D),{notes:n}=e;return w(n),k(!0),e}catch(e){return(0,j.v)(e),null}},[D,t,w,k]);(0,s.useEffect)(()=>{D&&I().then()},[D,I]);const T=e=>{if(e.preventDefault(),!l)return(0,j.v)("Access token not available");try{const e=n({text:A,email:D}).then(e=>e&&e.data?e:Promise.reject(new Error("Invalid response from server")));return(0,b.E)(S,e),C(""),null}catch(t){return(0,j.v)(t),null}};return(0,M.jsxs)(o.A,{display:"flex",flexDirection:"column",h:"100%",minH:0,maxW:"6xl",py:14,px:{base:6,md:12},children:[(0,M.jsx)("form",{onSubmit:T,children:(0,M.jsxs)(r.a,{position:"relative",maxW:"850px",mx:"auto",mb:{base:4,md:16},children:[(0,M.jsx)(c.D,{fontSize:{base:"3xl",md:"4xl",lg:"6xl"},textAlign:"center",color:"#204E78",children:"LIST of MY NOTES"}),(0,M.jsx)(d.MJ,{children:(0,M.jsx)(u.T,{onKeyDown:e=>{"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),T(e))},value:A,placeholder:"Please, write some note",onChange:e=>C(e.target.value),size:"sm"})}),(0,M.jsx)(x.B,{spacing:10,children:(0,M.jsx)(L,{colorScheme:"teal",type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Submit"})})]})}),(0,M.jsx)(r.a,{mt:4,flex:"1 1 auto",minH:0,overflowY:"auto",pr:"20px",pb:"".concat(80,"px"),sx:{overscrollBehavior:"contain"},children:(0,M.jsx)(f.Mp,{sensors:(0,f.FR)((0,f.MS)(f.AN,{activationConstraint:{distance:8}}),(0,f.MS)(f.uN)),collisionDetection:f.fp,modifiers:[g.FN,g.gj],onDragEnd:e=>{let{active:t,over:n}=e;if(!n||t.id===n.id)return;const s=null!==E&&void 0!==E?E:[],r=s.findIndex(e=>e._id===t.id),o=s.findIndex(e=>e._id===n.id);if(-1===r||-1===o)return;const i=(0,m.be)(s,r,o);N(i)},children:(0,M.jsx)(m.gB,{items:E.map(e=>e._id),strategy:m._G,children:(0,M.jsx)(h.B8,{spacing:1,children:E.map(e=>(0,M.jsx)(z,{item:e,onDelete:()=>(async e=>{if(!l)return(0,j.v)("Access token not available");k(!0);try{const t=i(e).then(e=>200===e.status?I():e).finally(()=>k(!1));(0,b.L)(S,t)}catch(t){k(!1),(0,j.v)(t)}return null})(e._id)},e._id))})})})})]})},R=()=>{const{accessToken:e}=(0,v.A)();return(0,M.jsx)(i.A,{children:(0,M.jsx)(r.a,{bg:"white",children:e?(0,M.jsx)(P,{}):(0,M.jsx)(o.A,{children:(0,M.jsx)(r.a,{children:"Notes are available only to logged-in users."})})})})}},7854:(e,t,n)=>{n.d(t,{E:()=>s,L:()=>r});const s=(e,t)=>e.promise(t,{loading:{title:"Saving...",description:"Please wait"},success:{title:"It has saved!",description:"Your data was saved successfully."},error:{title:"Failed to save",description:"Something went wrong."}}),r=(e,t)=>e.promise(t,{loading:{title:"Deleting...",description:"Please wait"},success:{title:"It has deleted!",description:"Your data was saved successfully."},error:{title:"Failed to delete",description:"Something went wrong."}})}}]);
//# sourceMappingURL=704.a203c72c.chunk.js.map